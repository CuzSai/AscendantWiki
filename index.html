<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weapon Damage Calculator</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://code.highcharts.com/highcharts.js" defer></script> <!-- Highcharts included as a deferred script -->
  <script src="script.js" defer></script> <!-- Main script file deferred to avoid execution before DOM is ready -->
</head>
<body>

  <!-- Sidebar for Calculated Stats -->
  <div class="stats-sidebar">
    <h2>Calculated Stats</h2>

    <div class="result">
      <h3>TTK (Headshot):</h3>
      <span id="ttkHeadshot">0.0s</span>
    </div>

    <div class="result">
      <h3>TTK (Bodyshot):</h3>
      <span id="ttkBodyshot">0.0s</span>
    </div>

    <div class="result">
      <h3>Damage (Headshot):</h3>
      <span id="damageHeadshot">0</span>
    </div>

    <div class="result">
      <h3>Damage (Bodyshot):</h3>
      <span id="damageBodyshot">0</span>
    </div>

    <div class="result">
      <h3>Shots to Kill:</h3>
      <span id="shotsToKill">0</span>
    </div>

    <div class="result">
      <h3>Fire Rate:</h3>
      <span id="fireRate">0 RPM</span>
    </div>

    <!-- Placeholder for falloff chart -->
    <div class="result">
      <h3>Damage Falloff Chart:</h3>
      <div id="falloffChart" style="width: 100%; height: 300px;"></div>
    </div>
  </div>

  <!-- Main Calculator Content -->
  <div class="calculator">
    <h1>Weapon Damage Calculator</h1>
    <hr class="section-divider">

    <!-- Weapon Selection Section -->
    <div class="section weapon-section">
      <h2>Choose Your Weapon</h2>
      <div class="weapon-buttons">
        <button class="weapon-button" onclick="selectWeapon(this, 'battle_rifle', 40, 3.0, 600)">Battle Rifle</button>
        <button class="weapon-button" onclick="selectWeapon(this, 'beam_gloves', 25, 2.0, 800)">Beam Gloves</button>
        <button class="weapon-button" onclick="selectWeapon(this, 'plasma_rifle', 30, 2.8, 700)">Plasma Rifle</button>
        <button class="weapon-button" onclick="selectWeapon(this, 'shotgun', 60, 3.5, 120)">Shotgun</button>
        <button class="weapon-button" onclick="selectWeapon(this, 'sniper_rifle', 80, 4.0, 90)">Sniper Rifle</button>
      </div>
    </div>

    <!-- Attachment Selection Section -->
    <div class="section attachment-section">
      <h2>Select Attachments</h2>
      <div class="attachment-category">
        <h3 class="attachment-title" onclick="toggleAccordion(this)">Optic</h3>
        <div class="attachment-buttons">
          <button class="attachment-button" onclick="selectAttachment(this, 'optics', 1.2)">Scope (+20% damage)</button>
          <button class="attachment-button" onclick="selectAttachment(this, 'optics', 1.1)">Red Dot (+10% damage)</button>
        </div>
      </div>
    </div>

    <!-- Armor Selection Section -->
    <div class="section armor-section">
      <h2>Select Armor</h2>
      <div class="armor-buttons">
        <button class="armor-button" onclick="selectArmor(this, 'common', 30)">Common (30 HP)</button>
        <button class="armor-button" onclick="selectArmor(this, 'rare', 60)">Rare (60 HP)</button>
        <button class="armor-button" onclick="selectArmor(this, 'epic', 90)">Epic (90 HP)</button>
        <button class="armor-button" onclick="selectArmor(this, 'legendary', 120)">Legendary (120 HP)</button>
      </div>
    </div>

    <!-- Compare Button -->
    <div class="section compare-section">
      <button class="compare-button" onclick="openCompareModal()">Compare</button>
      <div id="compareResults"></div>
    </div>

  </div>

  <!-- Compare Modal -->
  <div id="compareModal" class="modal">
    <div class="modal-content">
      <h2>Select Setup to Replace</h2>
      <button class="modal-button" onclick="replaceComparison(1)">Replace Setup 1</button>
      <button class="modal-button" onclick="replaceComparison(2)">Replace Setup 2</button>
      <button class="modal-button close" onclick="closeCompareModal()">Cancel</button>
    </div>
  </div>

</body>
</html>
